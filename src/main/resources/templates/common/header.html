<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<th:block th:fragment="header">
    <div class="navbar">
        <div>
            <a th:href="@{/}"><img src="/img/matchon_logo.png" alt="Matchon Logo" class="logo"></a>
        </div>
        <div class="center">
            <a th:href="@{/introduction}">INTRODUCTION</a>
            <a th:href="@{/matchup}">MATCHUP</a>
            <a th:href="@{/guest}">GUEST</a>
            <a th:href="@{/stadium}">STADIUM</a>
            <a th:href="@{/community}">COMMUNITY</a>
            <a th:href="@{/schedule}">SCHEDULE</a>
            <a th:href="@{/cs}">CS</a>
            <a th:href="@{/team}">TEAM</a>
            <a th:href="@{/shop}">SHOP</a>
        </div>
        <div class="icons">
            <img src="/img/chat-black.png">
            <img src="/img/bell-black.png">
        </div>
        <div class="auth">
            <a id="btn-login" th:href="@{/login}" class="btn">LOGIN</a>
            <a id="btn-signup" th:href="@{/signup/user}" class="btn">SIGN UP</a>

            <a id="btn-mypage" href="/mypage" class="btn" style="display: none;">MY</a>
            <a id="btn-logout" href="javascript:logout()" class="btn" style="display: none;">LOGOUT</a>
        </div>
    </div>
    <hr class="blue_hr">

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const accessToken = localStorage.getItem("accessToken");

            const loginBtn = document.getElementById("btn-login");
            const signupBtn = document.getElementById("btn-signup");
            const myBtn = document.getElementById("btn-mypage");
            const logoutBtn = document.getElementById("btn-logout");

            if (accessToken) {
                // 로그인 상태
                if (loginBtn) loginBtn.style.display = "none";
                if (signupBtn) signupBtn.style.display = "none";
                if (myBtn) myBtn.style.display = "inline-block";
                if (logoutBtn) logoutBtn.style.display = "inline-block";
            } else {
                // 비로그인 상태
                if (loginBtn) loginBtn.style.display = "inline-block";
                if (signupBtn) signupBtn.style.display = "inline-block";
                if (myBtn) myBtn.style.display = "none";
                if (logoutBtn) logoutBtn.style.display = "none";
            }
        });

        function logout() {
            localStorage.removeItem("accessToken");
            localStorage.removeItem("refreshToken");
            alert("로그아웃 되었습니다.");
            window.location.href = "/main";
        }
    </script>
</th:block>


</html>