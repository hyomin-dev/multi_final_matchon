<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/springsecurity5">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
</head>

<body>
<div th:fragment="footer">
    <hr class="navy_hr">
    <footer class="footer">
        team@matchon.com | 02-123-123
    </footer>

    <sec:authorize access="isAuthenticated()">
        <df-messenger
                intent="WELCOME"
                chat-icon="/img/aichatbot.png"
                chat-title="MatchON 챗봇"
                agent-id="db490e06-39f9-4c1a-80a3-baf3d3306fb4"
                language-code="ko">
        </df-messenger>
    </sec:authorize>
</div>

<script>
    window.addEventListener("df-messenger-loaded", function () {
        setTimeout(() => {
            const df = document.querySelector("df-messenger");
            const outer = df?.shadowRoot;
            const chat = outer?.querySelector("df-messenger-chat")?.shadowRoot;

            const launcher = chat?.querySelector(".launch-button");
            const launcherImg = launcher?.querySelector("img");

            if (launcher) {
                launcher.style.background = "white";
                launcher.style.width = "100px";
                launcher.style.height = "100px";
                launcher.style.borderRadius = "50%";
                launcher.style.boxShadow = "0 4px 12px rgba(0, 0, 0, 0.15)";
                launcher.style.display = "flex";
                launcher.style.alignItems = "center";
                launcher.style.justifyContent = "center";
                launcher.style.padding = "0";
            }

            if (launcherImg) {
                launcherImg.style.width = "75%";
                launcherImg.style.height = "75%";
                launcherImg.style.objectFit = "contain";
            }

            df.openChat();
            df.renderCustomText("안녕하세요! MatchON 챗봇입니다! 궁금하신 내용을 선택해 주세요.");
        }, 500);
    });
</script>

</body>
</html>