<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>

    <meta charset="UTF-8">
    <title>Matchon - Main</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}">

</head>
<body>
<div class="hero">

    <div class="navbar">
        <div>
            <img src="/img/matchon_logo.png" alt="Matchon Logo" class="logo">
        </div>
        <div class="center">
            <a th:href="@{/introduction}">INTRODUCTION</a>
            <a th:href="@{/matchup}">MATCHUP</a>
            <a th:href="@{/guest}">GUEST</a>
            <a th:href="@{/stadium}">STADIUM</a>
            <a th:href="@{/community}">COMMUNITY</a>
            <a th:href="@{/schedule}">SCHEDULE</a>
            <a th:href="@{/cs}">CS</a>
            <a th:href="@{/team}">TEAM</a>
            <a th:href="@{/shop}">SHOP</a>
        </div>
        <div class="icons">
            <img src="/img/chat-white.png">
            <img src="/img/bell-white.png">
        </div>
        <div class="auth">
            <!-- 로그인 전 -->
            <a id="btn-login" th:href="@{/login}" class="btn">LOGIN</a>
            <a id="btn-signup" th:href="@{/signup}" class="btn">SIGN UP</a>

            <!-- 로그인 후 -->
            <a id="btn-mypage" th:href="@{/mypage}" class="btn" style="display: none;">MY</a>
            <a id="btn-logout" href="javascript:logout()" class="btn" style="display: none;">LOGOUT</a>
        </div>
    </div>

    <div class="hero-text">
        <h1>Wanna Match?</h1>
        <h1>You're On!</h1>
        <button th:onclick="|location.href='@{/introduction}'|">GO!</button>
    </div>


    <div id="chatbot-img">
        <a th:href="@{#}"><img src="/img/aichatbot.png" alt="aichatbot" width="80" height="80"></a>
    </div>


    <footer class="footer">
        team@matchon.com | 02-123-123
    </footer>


</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const accessToken = localStorage.getItem("accessToken");


        const loginBtn = document.getElementById("btn-login");
        const signupBtn = document.getElementById("btn-signup");
        const myBtn = document.getElementById("btn-mypage");
        const logoutBtn = document.getElementById("btn-logout");

        if (accessToken) {
            // 로그인 상태
            if (loginBtn) loginBtn.style.display = "none";
            if (signupBtn) signupBtn.style.display = "none";
            if (myBtn) myBtn.style.display = "inline-block";
            if (logoutBtn) logoutBtn.style.display = "inline-block";
        } else {
            // 비로그인 상태
            if (loginBtn) loginBtn.style.display = "inline-block";
            if (signupBtn) signupBtn.style.display = "inline-block";
            if (myBtn) myBtn.style.display = "none";
            if (logoutBtn) logoutBtn.style.display = "none";
        }
    });



    function logout() {
        fetch('/auth/logout', {
            method: 'POST',
            credentials: 'include',
        })
            .then(res => {
                if (res.ok) {
                    localStorage.removeItem("accessToken");
                    localStorage.removeItem("refreshToken");
                    alert("로그아웃 되었습니다.");
                    window.location.href = "/main";
                } else {
                    alert("로그아웃 실패");
                }
            });
    }
</script>
</body>
</html>
