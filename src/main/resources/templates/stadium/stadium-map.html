<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>STADIUM</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/header.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/footer.css}">

    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=a7fac0ef351b12f799117f0847bf1d23&libraries=services"></script>

    <style>
        .stadiummap {
            text-align: center;
            margin-top: 30px;
        }

        .stadium-info-map {
            text-align: center;
            margin-top: 20px;
        }

        #map {
            width: 1000px;
            height: 1000px;
            margin: 0 auto;
        }

        .stadium-address {
            margin-top: 20px;
            font-size: 30px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div th:replace="~{common/header::header}"></div>
<div id="wrap">

    <h1 class="stadiummap">구장 위치</h1>

    <div class="stadium-info-map">
        <div id="map"></div>


        <div class="stadium-address">
            <strong></strong> <span id="address" th:text="${stadium.faciRoadAddr}">서울시 어딘가</span>
        </div>
    </div>

</div>
<div th:replace="~{common/footer::footer}"></div>

<script>
    window.onload = function () {

        var address = document.getElementById('address').textContent.trim();

        var mapContainer = document.getElementById('map');
        var mapOption = {
            center: new kakao.maps.LatLng(37.5665, 126.9780), // 기본 서울
            level: 1
        };

        var map = new kakao.maps.Map(mapContainer, mapOption);


        var geocoder = new kakao.maps.services.Geocoder();

        geocoder.addressSearch(address, function(result, status) {
            if (status === kakao.maps.services.Status.OK) {
                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);


                map.setCenter(coords);


                var marker = new kakao.maps.Marker({
                    map: map,
                    position: coords
                });

                infowindow.open(map, marker);
            } else {
                alert("주소를 찾을 수 없습니다: " + address);
            }
        });
    };
</script>

</body>
</html>
